package TCBDashboard;

import java.time.Duration;

import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.Keys;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;

public class Dashboardopen {
	WebDriver driver;
	WebDriverWait wait;
	@BeforeMethod
	public void setup() throws InterruptedException{
		System.setProperty("webdriver.chrome.driver","C:\\Users\\HDave\\Downloads\\chromedriver_win32 (2).\\chromedriver.exe");
		driver = new ChromeDriver();
		driver.manage().window().maximize();
		driver.get("https://tcb.dev.devtechlab.com/");
		wait = new WebDriverWait(driver, Duration.ofSeconds(5));
		Thread.sleep(2000);
	}
	@Test (priority = 0)
	//Open TCB Dashboard page
	public void test01() throws InterruptedException{
		
		System.setProperty("webdriver.chrome.driver","C:\\Users\\HDave\\Downloads\\chromedriver_win32 (2).\\chromedriver.exe");
		driver = new ChromeDriver();
		driver.manage().window().maximize();
		driver.get("https://tcb.dev.devtechlab.com/");
		Thread.sleep(2000);
		System.out.print("Dashboard");
	}
	@Test (priority = 1)
	//Open Auto filter option
	public void test02() throws InterruptedException{
		WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(5));
		WebElement filterButton = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector("button[id='autofilter'")));
		filterButton.click();
		Thread.sleep(5000);
//	Add Countries
		WebElement selectcountry = driver.findElement(By.xpath("//*[@id='react-select-3-input']"));
		selectcountry.sendKeys("India");
		selectcountry.sendKeys(Keys.ENTER);
		selectcountry.sendKeys("Afghanistan");
		selectcountry.sendKeys(Keys.ENTER);
		selectcountry.sendKeys("China");
		selectcountry.sendKeys(Keys.ENTER);
		selectcountry.sendKeys("Pakistan");
		selectcountry.sendKeys(Keys.ENTER);
		Actions country = new Actions(driver);
		country.moveToElement(selectcountry).
		click().build().perform();
		Thread.sleep(2000);
//Add Agencies
		WebElement selectagency = driver.findElement(By.xpath("//*[@id='react-select-4-input']"));
		selectagency.sendKeys("Department of Agriculture (USDA)");
		selectagency.sendKeys(Keys.ENTER);
		selectagency.sendKeys("Department of State (DOS)");
		selectagency.sendKeys(Keys.ENTER);
		selectagency.sendKeys("Department of Labor (DOL)");
		selectagency.sendKeys(Keys.ENTER);
		selectagency.sendKeys("Department of the Treasury (TRE)");
		selectagency.sendKeys(Keys.ENTER);
		Actions agency = new Actions(driver);
		agency.moveToElement(selectagency).
		click().build().perform();
//Add Categories
		WebElement selectcategory = driver.findElement(By.xpath("//*[@id='react-select-5-input']"));
		selectcategory.sendKeys("Enterprise Development");
		selectcategory.sendKeys(Keys.ENTER);
		selectcategory.sendKeys("Trade-related Labor");
		selectcategory.sendKeys(Keys.ENTER);
		selectcategory.sendKeys("Trade Promotion");
		selectcategory.sendKeys(Keys.ENTER);
		selectcategory.sendKeys("Customs Operations");
		selectcategory.sendKeys(Keys.ENTER);
		Actions category = new Actions(driver);
		category.moveToElement(selectcategory).
		click().build().perform();
		Thread.sleep(5000);
//Add Region
		WebElement selectregion = driver.findElement(By.xpath("//*[@id='react-select-6-input']"));
		selectregion.sendKeys("World");
		selectregion.sendKeys(Keys.ENTER);
		Actions region = new Actions(driver);
		region.moveToElement(selectregion).
		click().build().perform();
		Thread.sleep(5000);
//Add Incomegroup
		WebElement selectincomegroup = driver.findElement(By.xpath("//*[@id='react-select-7-input']"));
		selectincomegroup.sendKeys("Lower Middle Income");
		selectincomegroup.sendKeys(Keys.ENTER);
		Actions incomegroup = new Actions(driver);
		incomegroup.moveToElement(selectincomegroup).
		click().build().perform();
		Thread.sleep(5000);
//Click Apply Filter button
		WebElement addfilter = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("/html/body/div[3]/div/div/div[2]/div/div[6]/button[1]")));
		addfilter.sendKeys(Keys.ENTER);
		Thread.sleep(2000);
		
//Click Clear Filter button
		//WebElement clearfilter = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("/html/body/div[3]/div/div/div[2]/div/div[6]/button[2]")));
		//clearfilter.sendKeys(Keys.ENTER);
//Activity Modal Close
		//WebElement activityModalClose = wait.until(ExpectedConditions.elementToBeClickable((By.cssSelector("button[class='modal-close']"))));
		//activityModalClose.click();
		//String title = driver.getTitle();
		//System.out.println(title);
		//Thread.sleep(1000);
		//System.out.print("Addfilter");
		//driver.close();
		
	}
	@Test (priority = 2)
//Total Obligation information tab
	public void test03() throws InterruptedException{
		WebElement totalobligation = driver.findElement(By.xpath("//*[local-name()='svg' and @id='TotalObligation']/*[local-name()='path']"));
		Actions act = new Actions(driver);
	      act.moveToElement(totalobligation).
	      click().build().perform();
	      Thread.sleep(2000);
	      System.out.print("Totalobligation");
	      driver.close();
}
	@Test (priority = 3)
//Activities information tab open 
	public void test04() throws InterruptedException{
		 WebElement activities = driver.findElement(By.xpath("//*[local-name()='svg' and @id='Activities']/*[local-name()='path']"));
		Actions act1 = new Actions(driver);
	 	act1.moveToElement(activities).
	 	click().build().perform();
	 	Thread.sleep(2000);
	 	System.out.print("Activities");
	 	driver.close();
}
	@Test (priority = 4)
//Countries information tab open
	public void test05() throws InterruptedException{
		WebElement country = driver.findElement(By.xpath("//*[@id='Countries']"));
		Actions act2 = new Actions(driver);
 		act2.moveToElement(country).
 		click().build().perform();
 		Thread.sleep(2000);
 		System.out.print("Countries");
 		driver.close();
}
	@Test (priority = 5)
//Implementing Agency information tab open
	public void test06() throws InterruptedException{
		WebElement implagency = driver.findElement(By.xpath("//*[local-name()='svg' and @id='ImpleAgency']/*[local-name()='path']"));
		Actions act3 = new Actions(driver);
		act3.moveToElement(implagency).
		click().build().perform();
		Thread.sleep(2000);
		driver.close();
	}

	@Test (priority = 6)
//Region information tab open
	public void test07() throws InterruptedException{
		WebElement region = driver.findElement(By.xpath("//*[local-name()='svg' and @id='Region']/*[local-name()='path']"));
		Actions act5 = new Actions(driver);
		act5.moveToElement(region).
		click().build().perform();
		Thread.sleep(2000);
		driver.close();
}
	@Test (priority = 7)
//Incomegroup information tab open
	public void test08() throws InterruptedException{
		WebElement incomegroup = driver.findElement(By.xpath("//*[local-name()='svg' and @id='Incomegroup']/*[local-name()='path']"));
		Actions act6 = new Actions(driver);
		act6.moveToElement(incomegroup).
		click().build().perform();
		Thread.sleep(2000);	
		driver.close();
}
	
	@Test (priority = 8)
//Category information tab open
	public void test09() throws InterruptedException{
		WebElement category = driver.findElement(By.xpath("//*[local-name()='svg' and @id='Category']/*[local-name()='path']"));
		Actions act4 = new Actions(driver);
		act4.moveToElement(category).
		click().build().perform();
		Thread.sleep(2000);
		driver.close();
}
	@Test (priority = 9)
//Activity Report information tab open
	public void test010() throws InterruptedException{
		WebElement activityreport = driver.findElement(By.xpath("//*[local-name()='svg' and @id='Activitiesreports']/*[local-name()='path']"));
		Actions act7 = new Actions(driver);
		act7.moveToElement(activityreport).
		click().build().perform();
		Thread.sleep(2000);	
		driver.close();
}
	
		@Test (priority = 10)
//Select 2018 Fiscal Year 
		public void test0111() throws InterruptedException{
		WebElement fiscalYearDropdown = wait.until(ExpectedConditions.elementToBeClickable((By.cssSelector("div[id='Dashfiscalyear']"))));
		fiscalYearDropdown.click();
		Thread.sleep(2000);
		WebElement option = fiscalYearDropdown.findElement(By.xpath("//div[text()='2018']"));
		option.click();
		//js.executeScript("window.scrollTo(0, document.body.scrollHeight)");
		Thread.sleep(2000);
//Select Report from the list
		WebElement activityreportlink = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//*[@id='main-content']/div/div[4]/div/div[2]/div/div/div/table/tbody/tr[1]/td[1]/button/div")));
		activityreportlink.click();
		Thread.sleep(5000);
//Close the report tab	
		WebElement activityreportModalClose = wait.until(ExpectedConditions.elementToBeClickable((By.cssSelector("button[class='modal-close']"))));
		activityreportModalClose.click();
		Thread.sleep(2000);
//Click forward arrow to move to next page	
		WebElement rightarrow = driver.findElement(By.xpath("//*[local-name()='svg' and @data-testid='ChevronRightIcon']/*[local-name()='path']"));
		Actions act8 = new Actions(driver);
		act8.moveToElement(rightarrow).
		click().build().perform();
		Thread.sleep(2000);
//Click forward arrow to move to last page	
		WebElement lastpagearrow = driver.findElement(By.xpath("//*[local-name()='svg' and @data-testid='LastPageIcon']/*[local-name()='path']"));
		Actions act9 = new Actions(driver);
		act9.moveToElement(lastpagearrow).
		click().build().perform();
		//js.executeScript("arguments[0].scrollIntoView();", lastpagearrow);
		Thread.sleep(2000);
//Click right arrow to move to first page		
		WebElement firstpagearrow = driver.findElement(By.xpath("//*[local-name()='svg' and @data-testid='FirstPageIcon']/*[local-name()='path']"));
		Actions act10 = new Actions(driver);
		act10.moveToElement(firstpagearrow).
		click().build().perform();
		Thread.sleep(2000);
//Search functionality
		WebElement search = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//*[@id='main-content']/div/div[4]/div/div[1]/div[3]/div/input")));
		search.sendKeys("WTO");
		search.sendKeys(Keys.ENTER);
		driver.close();
	}
//Map
	@Test (priority = 11)
	public void test012() throws InterruptedException{
		
//Select Iran	
		WebElement Iran = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector("#page-wrap > div > div > div:nth-child(3) > div.cell.column-primary.medium-12.custom-8 > div.cell.world-map__container > div:nth-child(1) > div:nth-child(1) > div > svg > g > g > g > path:nth-child(143)")));
		Iran.click();
		Thread.sleep(2000);
//Select China		
		WebElement China = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector("#page-wrap > div > div > div:nth-child(3) > div.cell.column-primary.medium-12.custom-8 > div.cell.world-map__container > div:nth-child(1) > div:nth-child(1) > div > svg > g > g > g > path:nth-child(151)")));
		China.click();
		Thread.sleep(2000);
//Select India		
		WebElement India = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector("#page-wrap > div > div > div:nth-child(3) > div.cell.column-primary.medium-12.custom-8 > div.cell.world-map__container > div:nth-child(1) > div:nth-child(1) > div > svg > g > g > g > path:nth-child(141)")));
		India.click();
		Thread.sleep(2000);
		
//Select + zoom out
		WebElement zoomout = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//*[@id='main-content']/div/div[3]/div[1]/div[1]/div[1]/div[1]/div/div/div/button[1]")));
		Actions out = new Actions(driver);
		out.doubleClick(zoomout).perform();		
		Thread.sleep(2000);
//Select - zoom in	
		WebElement zoomin = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//*[@id='main-content']/div/div[3]/div[1]/div[1]/div[1]/div[1]/div/div/div/button[2]")));
		Actions in = new Actions(driver);
		in.doubleClick(zoomin).perform();		
		Thread.sleep(2000);
// Select Resetzoom
		WebElement resetzoom = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//*[@id='main-content']/div/div[3]/div[1]/div[1]/div[1]/div[1]/div/div/button")));
		Actions reset = new Actions(driver);
		reset.doubleClick(resetzoom).perform();		
		Thread.sleep(2000);
		driver.close();
	}
}